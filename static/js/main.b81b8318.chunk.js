(this["webpackJsonpfood-ordering-app"]=this["webpackJsonpfood-ordering-app"]||[]).push([[0],{23:function(n,e,t){},30:function(n,e,t){"use strict";t.r(e);var r,a,i,o,c,s,l,d,u,b,m,p,j,h,f,x,g,O,w,v,C=t(1),y=t.n(C),k=t(7),E=t.n(k),S=(t(23),t(4)),N=t(2),P=t(3),D=P.a.button(r||(r=Object(N.a)(["\n  font: inherit;\n  cursor: pointer;\n  border: none;\n  padding: 0.5rem 2rem;\n  border-radius: 25px;\n  font-weight: bold;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n"]))),B="rgba(\t244, 162, 97, 1)",T="rgba(246, 177, 120, 1)",A="rgba(79, 93, 117, 1)",F="rgba(147, 160, 182, 1)",I="rgba(172, 180, 194, 1)",V="rgba(255, 255, 255, 1)",R="375px",z="425px",L="768px",H="1024px",M="1440px",Y="2560px",J={mobileS:"(min-width: ".concat("320px",")"),mobileM:"(min-width: ".concat(R,")"),mobileL:"(min-width: ".concat(z,")"),tablet:"(min-width: ".concat(L,")"),laptop:"(min-width: ".concat(H,")"),laptopL:"(min-width: ".concat(M,")"),desktop:"(min-width: ".concat(Y,")"),desktopL:"(min-width: ".concat(Y,")")},$=y.a.createContext({totalPrice:0,items:[],onAdd:function(n){},onRemove:function(n){},clearCart:function(){}}),_=t(0),q=Object(P.a)(D)(a||(a=Object(N.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: space-around;\n  gap: 0.5rem;\n  align-items: center;\n  background-color: ",";\n  color: ",";\n  padding: 1.2rem 2rem;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n\n  &:hover,\n  &:active {\n    background-color: ",";\n  }\n\n  //bump animation when items are added\n  &.bump {\n    animation: bump 300ms ease-out;\n  }\n\n  @keyframes bump {\n    0% {\n      transform: scale(1);\n    }\n    10% {\n      transform: scale(0.9);\n    }\n    30% {\n      transform: scale(1.1);\n    }\n    50% {\n      transform: scale(1.15);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n"])),B,V,T),G=P.a.span(i||(i=Object(N.a)(["\n  display: block;\n  border-radius: 50%;\n  width: 1.1rem;\n  height: 1.1rem;\n  background: ",";\n  padding: 0.2rem;\n"])),A),K=function(n){var e=Object(C.useState)(!1),t=Object(S.a)(e,2),r=t[0],a=t[1],i=Object(C.useContext)($),o=i.items.reduce((function(n,e){return n+e.amount}),0),c=r?"bump":"";return Object(C.useEffect)((function(){if(0!==i.items.length){a(!0);var n=setTimeout((function(){a(!1)}),300);return function(){clearTimeout(n)}}}),[i.items]),Object(_.jsxs)(q,{onClick:n.onClick,className:c,children:[Object(_.jsx)("span",{children:Object(_.jsx)("i",{className:"fa fa-shopping-cart"})}),Object(_.jsx)("span",{children:"Your Cart"}),Object(_.jsx)(G,{children:o})]})},Q=P.a.nav(o||(o=Object(N.a)(["\n  width: 100%;\n  min-height: 10vh;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  position: sticky;\n  top: 0;\n  align-items: center;\n  transition: all 0.5s ease-in;\n  background: transparent;\n  color: ",";\n  padding: 0 1rem 0 1rem;\n\n  &.scrolled {\n    color: white;\n    background: ",";\n  }\n"])),A,A),U=function(n){var e=Object(C.useState)(!1),t=Object(S.a)(e,2),r=t[0],a=t[1];window.addEventListener("scroll",(function(){var n=window.scrollY;a(n>=100)}));var i=r?"scrolled":"";return Object(_.jsx)(y.a.Fragment,{children:Object(_.jsxs)(Q,{className:i,children:[Object(_.jsx)("h1",{children:"Sopo Meal"}),Object(_.jsx)(K,{onClick:n.onOpenCart})]})})},W=t(6),X=t.n(W),Z=t(10),nn=t(5),en=P.a.div(c||(c=Object(N.a)(["\n  font-size: 16px;\n  margin-top: 1rem;\n\n  & label {\n    margin-right: 1rem;\n    font-weight: bold;\n  }\n\n  &.invalid input {\n    border: 1px solid #b40e0e;\n    background-color: #fddddd;\n  }\n\n  &.order-input {\n    display: flex;\n    flex-flow: column wrap;\n\n    & label {\n      display: block;\n    }\n  }\n\n  @media "," {\n    margin-top: 0;\n  }\n"])),J.tablet),tn=P.a.input(s||(s=Object(N.a)(['\n  border-radius: 5px;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n  border: none;\n  height: 1.5rem;\n  margin-top: 0.5rem;\n\n  &.amount-input {\n    width: 2rem;\n    height: 1rem;\n    text-align: center;\n  }\n\n  //Remove arrows from number field\n  /* Chrome, Safari, Edge, Opera */\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  /* Firefox */\n  &[type="number"] {\n    -moz-appearance: textfield;\n  }\n']))),rn=y.a.forwardRef((function(n,e){return Object(_.jsxs)(en,{className:n.classes,children:[Object(_.jsx)("label",{htmlFor:n.input.id,children:n.labelName}),Object(_.jsx)(tn,Object(nn.a)(Object(nn.a)({ref:e},n.input),{},{className:n.addedInputClass})),n.isError&&Object(_.jsxs)("p",{style:{color:"red",margin:"0.5rem 0 0 0"},children:["Please enter a valid ",n.errorName]})]})})),an=P.a.form(l||(l=Object(N.a)(["\n  display: flex;\n  flex-flow: column wrap;\n  align-items: center;\n  border-top: 2px solid white;\n  width: 100%;\n\n  @media "," {\n    width: auto;\n    border-top: none;\n    align-items: flex-end;\n  }\n"])),J.tablet),on=Object(P.a)(D)(d||(d=Object(N.a)(["\n  background-color: ",";\n  color: ",";\n  margin-top: 1rem;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.6);\n\n  &:hover {\n    background-color: ",";\n  }\n"])),A,V,F),cn=function(n){var e=Object(C.useState)(!0),t=Object(S.a)(e,2),r=t[0],a=t[1],i=Object(C.useRef)();return Object(_.jsxs)(an,{onSubmit:function(e){e.preventDefault();var t=i.current.value,r=+t;0===t.trim().length||r<1||r>5?a(!1):n.onAddToCart(r)},children:[Object(_.jsx)(rn,{ref:i,labelName:"Amount: ",addedInputClass:"amount-input",input:{id:"amount_"+n.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(_.jsx)(on,{children:"+ Add"}),!r&&Object(_.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},sn=P.a.div(u||(u=Object(N.a)(["\n  border-radius: 12px;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n"]))),ln=Object(P.a)(sn)(b||(b=Object(N.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-flow: column wrap;\n  gap: 1rem;\n  background: ",";\n  padding: 1rem;\n  margin: 1rem;\n  &li {\n    align-self: left;\n  }\n\n  @media "," {\n    flex-flow: row wrap;\n    gap: 0rem;\n    padding: 1rem 2rem 1rem 2rem;\n  }\n"])),B,J.tablet),dn=function(n){var e=Object(C.useContext)($);return Object(_.jsxs)(ln,{children:[Object(_.jsxs)("li",{children:[Object(_.jsx)("h2",{children:n.name}),Object(_.jsx)("p",{children:n.description}),Object(_.jsxs)("p",{children:["$",n.price.toFixed(2)]})]}),Object(_.jsx)(cn,{onAddToCart:function(t){e.onAdd({id:n.id,name:n.name,amount:t,price:n.price})},id:n.id})]})},un=P.a.ul(m||(m=Object(N.a)(["\n  display: flex;\n  //mobile-friendly by default:\n  flex-flow: column wrap;\n  margin: 1rem;\n  padding: 0.5rem;\n  list-style-type: none;\n"]))),bn=function(){var n=Object(C.useState)([]),e=Object(S.a)(n,2),t=e[0],r=e[1],a=Object(C.useState)(null),i=Object(S.a)(a,2),o=i[0],c=i[1],s=Object(C.useState)(!1),l=Object(S.a)(s,2),d=l[0],u=l[1],b=Object(C.useCallback)(Object(Z.a)(X.a.mark((function n(){var e,t,a,i;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.prev=1,n.next=4,fetch("https://react-project-exercise-default-rtdb.europe-west1.firebasedatabase.app/Meals.json");case 4:if((e=n.sent).ok){n.next=7;break}throw new Error("Something went wrong with fetching the meals data!");case 7:return n.next=9,e.json();case 9:for(i in t=n.sent,a=[],t)a.push({id:i,name:t[i].name,description:t[i].description,price:t[i].price});r(a),u(!1),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(1),u(!1),c(n.t0.message);case 20:case"end":return n.stop()}}),n,null,[[1,16]])}))),[]);return Object(C.useEffect)((function(){b()}),[b]),Object(_.jsxs)(un,{children:[!d&&t.length>0&&t.map((function(n){return Object(_.jsx)(dn,{id:n.id,name:n.name,description:n.description,price:n.price},n.id)})),!d&&o&&Object(_.jsx)("p",{children:o}),d&&Object(_.jsx)("p",{children:"Loading..."})]})},mn=t.p+"static/media/restaurant_image.c82e5a0b.jpg",pn=Object(P.a)(sn)(p||(p=Object(N.a)(["\n  margin: 2rem 1rem 2rem 1rem;\n  padding: 1rem;\n  text-align: center;\n  background: rgba(255, 255, 255, 0.9);\n\n  @media (min-width: 1024px) {\n    margin: 3rem 15rem 3rem 15rem;\n    padding: 2rem;\n  }\n\n  @media (min-width: 1440px) {\n    padding: 5rem;\n  }\n"]))),jn=P.a.div(j||(j=Object(N.a)(["\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  background: repeat url(",");\n"])),mn),hn=function(){return Object(_.jsx)(jn,{children:Object(_.jsxs)(pn,{children:[Object(_.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(_.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(_.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})})},fn=P.a.li(h||(h=Object(N.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 3px solid ",";\n  padding: 1rem 0;\n  font-size: 14px;\n\n  & div.actions {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-end;\n    text-align: center;\n  }\n\n  @media "," {\n    font-size: auto;\n  }\n"])),B,J.tablet),xn=P.a.div(f||(f=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  @media "," {\n    gap: 2rem;\n  }\n\n  & span.price {\n    font-weight: bold;\n    color: ",";\n  }\n\n  & span.amount {\n    font-weight: bold;\n    border: 1px solid ",";\n    padding: 0.25rem 0.75rem;\n    border-radius: 6px;\n    color: ",";\n  }\n"])),J.tablet,A,F,A),gn=Object(P.a)(D)(x||(x=Object(N.a)(["\n  border: 1px solid ",";\n  font: inherit;\n  font-weight: bold;\n  font-size: 1.25rem;\n  width: 5rem;\n  color: ",";\n  text-align: center;\n  background-color: transparent;\n  cursor: pointer;\n  margin: 0.25rem;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n\n  &:hover,\n  &:active {\n    background-color: ",";\n    color: white;\n  }\n"])),A,A,F),On=function(n){return Object(_.jsxs)(fn,{children:[Object(_.jsxs)("div",{className:"content",children:[Object(_.jsx)("h2",{children:n.name}),Object(_.jsxs)(xn,{children:[Object(_.jsxs)("span",{className:"price",children:["$",n.price.toFixed(2)]}),Object(_.jsxs)("span",{className:"amount",children:["x ",n.amount]})]})]}),Object(_.jsxs)("div",{className:"actions",children:[Object(_.jsx)(gn,{onClick:n.onRemove,children:"-"}),Object(_.jsx)(gn,{onClick:n.onAdd,children:"+"})]})]})},wn=function(n){var e=Object(C.useState)(""),t=Object(S.a)(e,2),r=t[0],a=t[1],i=Object(C.useState)(!1),o=Object(S.a)(i,2),c=o[0],s=o[1],l=n(r);return{value:r,isValid:l,hasError:!l&&c,handleValueChange:function(n){a(n.target.value)},handleInputBlur:function(){s(!0)}}},vn=P.a.form(g||(g=Object(N.a)(["\n  display: flex;\n  flex-flow: column wrap;\n  gap: 0.5rem;\n  margin-top: 2rem;\n\n  & div.confirm-actions {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-end;\n    gap: 1rem;\n    margin-top: 1.5rem;\n\n    & button.confirm-btn {\n      background-color: ",";\n      color: ",";\n\n      &:disabled,\n      button:disabled:hover,\n      button:disabled:active {\n        background-color: ",";\n        color: ",";\n      }\n    }\n  }\n"])),B,V,A,V),Cn=function(n){return""!==n.trim()},yn=function(n){return 5===n.trim().length},kn=function(n){var e=wn(Cn),t=e.value,r=e.isValid,a=e.hasError,i=e.handleValueChange,o=e.handleInputBlur,c=wn(Cn),s=c.value,l=c.isValid,d=c.hasError,u=c.handleValueChange,b=c.handleInputBlur,m=wn(yn),p=m.value,j=m.isValid,h=m.hasError,f=m.handleValueChange,x=m.handleInputBlur,g=wn(Cn),O=g.value,w=g.isValid,v=g.hasError,C=g.handleValueChange,y=g.handleInputBlur,k=[{id:"name",name:"Name",value:t,isError:a,errorText:"name!",onChange:i,onBlur:o,classes:a?"order-input invalid":"order-input",type:"text"},{id:"street",name:"Street",value:s,isError:d,errorText:"street!",onChange:u,onBlur:b,classes:d?"order-input invalid":"order-input",type:"text"},{id:"postal",name:"Postal Code",value:p,isError:h,errorText:"postal code (5 characters long)!",onChange:f,onBlur:x,classes:h?"order-input invalid":"order-input",type:"number"},{id:"city",name:"City",value:O,isError:v,errorText:"city!",onBlur:y,onChange:C,classes:v?"order-input invalid":"order-input",type:"text"}],E=!1;r&&l&&j&&w&&(E=!0);return Object(_.jsxs)(vn,{onSubmit:function(e){e.preventDefault(),E&&n.onConfirm({name:t,street:s,postalCode:p,city:O})},children:[k.map((function(n){return Object(_.jsx)(rn,{labelName:n.name,isError:n.isError,errorName:n.errorText,classes:n.classes,input:{id:n.id,type:n.type,value:n.value,onBlur:n.onBlur,onChange:n.onChange}})})),Object(_.jsxs)("div",{className:"confirm-actions",children:[Object(_.jsx)(D,{type:"button",onClick:n.onCancel,style:{backgroundColor:I,color:V},children:"Cancel"}),Object(_.jsx)(D,{disabled:!E,onClick:n.onOrder,className:"confirm-btn",children:"Confirm"})]})]})},En=Object(P.a)(sn)(O||(O=Object(N.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  z-index: 100;\n  overflow: hidden;\n  background: white;\n  padding: 1.25rem;\n\n  @media "," {\n    width: 50%;\n  }\n\n  & ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    max-height: 20rem;\n    overflow: auto;\n  }\n\n  & div.total {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-weight: bold;\n    font-size: 1.5rem;\n    margin: 2rem 0;\n  }\n\n  & div.order-actions {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-end;\n    gap: 0.5rem;\n  }\n"])),J.tablet),Sn=function(n){var e=Object(C.useContext)($),t="$".concat(e.totalPrice.toFixed(2)),r=e.items.length>0,a=Object(C.useState)(!1),i=Object(S.a)(a,2),o=i[0],c=i[1],s=Object(C.useState)({isHappening:!1,isDone:!1}),l=Object(S.a)(s,2),d=l[0],u=l[1],b=Object(C.useState)(null),m=Object(S.a)(b,2),p=m[0],j=m[1],h=function(n){e.onRemove(n)},f=function(n){e.onAdd(Object(nn.a)(Object(nn.a)({},n),{},{amount:1}))},x=function(){var n=Object(Z.a)(X.a.mark((function n(t){var r,a;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u({isHappening:!0,isDone:!1}),n.prev=1,n.next=4,fetch("https://react-project-exercise-default-rtdb.europe-west1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify({orderTime:new Date,user:t,orderedItems:e.items})});case 4:if((r=n.sent).ok){n.next=7;break}throw new Error("Something went wrong with sending your order, try again!");case 7:return n.next=9,r.json();case 9:a=n.sent,console.log(a),u({isHappening:!1,isDone:!0}),e.clearCart(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(1),j(n.t0.message),u({isHappening:!1,isDone:!1});case 19:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(e){return n.apply(this,arguments)}}(),g=Object(_.jsxs)("div",{className:"order-actions",children:[Object(_.jsx)(D,{style:{backgroundColor:I,color:V},onClick:n.onCloseCart,children:"Close"}),r&&Object(_.jsx)(D,{style:{backgroundColor:"".concat(B),color:"white"},onClick:function(){c(!0)},children:"Order"})]}),O=Object(_.jsxs)(y.a.Fragment,{children:[Object(_.jsx)("ul",{children:e.items.map((function(n){return Object(_.jsx)(On,{amount:n.amount,name:n.name,price:n.price,onRemove:h.bind(null,n.id),onAdd:f.bind(null,n)},n.id)}))}),Object(_.jsxs)("div",{className:"total",children:[Object(_.jsx)("span",{children:"Total Price"}),Object(_.jsx)("span",{children:t})]}),!o&&g,o&&Object(_.jsx)(kn,{onCancel:n.onCloseCart,onConfirm:x})]}),w=Object(_.jsx)("p",{children:"Sending order data..."}),v=Object(_.jsxs)(y.a.Fragment,{children:[Object(_.jsx)("p",{children:"You have successfully sent your order!"}),Object(_.jsx)("div",{className:"order-actions",children:Object(_.jsx)(D,{style:{backgroundColor:I,color:V},onClick:n.onCloseCart,children:"Close"})})]});return Object(_.jsxs)(En,{children:[!d.isHappening&&!d.isDone&&!p&&O,!d.isHappening&&p&&Object(_.jsx)("p",{children:p}),d.isHappening&&!p&&w,d.isDone&&v]})},Nn=P.a.div(w||(w=Object(N.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  z-index: 10;\n  background: rgba(0, 0, 0, 0.75);\n"]))),Pn=function(n){return Object(_.jsx)(Nn,{onClick:n.onCloseCart})},Dn=function(n){return Object(_.jsxs)(y.a.Fragment,{children:[E.a.createPortal(Object(_.jsx)(Pn,{onCloseCart:n.onCloseCart}),document.getElementById("backdrop-root")),E.a.createPortal(Object(_.jsx)(Sn,{onCloseCart:n.onCloseCart}),document.getElementById("modal-root"))]})},Bn=t(14),Tn={items:[],totalPrice:0},An=function(n,e){if("ADD"===e.type){var t,r=n.totalPrice+e.item.price*e.item.amount,a=n.items.findIndex((function(n){return n.id===e.item.id})),i=n.items[a];if(i){var o=Object(nn.a)(Object(nn.a)({},i),{},{amount:i.amount+e.item.amount});(t=Object(Bn.a)(n.items))[a]=o}else t=n.items.concat(e.item);return{items:t,totalPrice:r}}if("REMOVE"===e.type){var c,s=n.items.findIndex((function(n){return n.id===e.id})),l=n.items[s],d=n.totalPrice-l.price;if(1===l.amount)c=n.items.filter((function(n){return n.id!==e.id}));else{var u=Object(nn.a)(Object(nn.a)({},l),{},{amount:l.amount-1});(c=Object(Bn.a)(n.items))[s]=u}return{items:c,totalPrice:d}}return e.type,Tn},Fn=function(n){var e=Object(C.useReducer)(An,Tn),t=Object(S.a)(e,2),r=t[0],a=t[1];return Object(_.jsx)($.Provider,{value:{totalPrice:r.totalPrice,items:r.items,onAdd:function(n){a({type:"ADD",item:n})},onRemove:function(n){a({type:"REMOVE",id:n})},clearCart:function(){a({type:"CLEAR"})}},children:n.children})},In=P.a.div(v||(v=Object(N.a)(["\n  margin: auto;\n\n  @media "," {\n    max-width: 800px;\n  }\n\n  @media "," {\n    max-width: 1400px;\n  }\n"])),J.laptop,J.desktop);var Vn=function(){var n=Object(C.useState)(!1),e=Object(S.a)(n,2),t=e[0],r=e[1];return Object(_.jsxs)(Fn,{children:[t&&Object(_.jsx)(Dn,{onCloseCart:function(){r(!1)}}),Object(_.jsx)(U,{onOpenCart:function(){r(!0)}}),Object(_.jsx)(hn,{}),Object(_.jsx)(In,{children:Object(_.jsx)(bn,{})})]})},Rn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,31)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),r(n),a(n),i(n),o(n)}))};E.a.render(Object(_.jsx)(y.a.StrictMode,{children:Object(_.jsx)(Vn,{})}),document.getElementById("root")),Rn()}},[[30,1,2]]]);
//# sourceMappingURL=main.b81b8318.chunk.js.map